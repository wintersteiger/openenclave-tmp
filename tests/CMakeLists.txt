# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License.

option(ENABLE_FULL_LIBC_TESTS "Build all libc tests and include in test list" OFF)
option(ENABLE_FULL_LIBCXX_TESTS "Build all libcxx tests and include in test list" OFF)

if(ENABLE_FULL_LIBC_TESTS)
    message("ENABLE_FULL_LIBC_TESTS set - building all libc tests")
else()
    message("ENABLE_FULL_LIBC_TESTS not set - building some libc tests")
endif()

if(ENABLE_FULL_LIBCXX_TESTS)
    message("ENABLE_FULL_LIBCXX_TESTS set - building all libcxx tests")
else()
    message("ENABLE_FULL_LIBCXX_TESTS not set - building some libcxx tests")
endif()

add_subdirectory(aesm)
add_subdirectory(mem)
add_subdirectory(safemath)
add_subdirectory(str)

if (UNIX OR ADD_WINDOWS_ENCLAVE_TESTS)
add_subdirectory(abortStatus)
add_subdirectory(bigmalloc)
add_subdirectory(create-errors)
add_subdirectory(create-rapid)
add_subdirectory(debug-mode)
add_subdirectory(ecall)
add_subdirectory(ecall_ocall)
add_subdirectory(echo)
add_subdirectory(enclaveparam)
add_subdirectory(cppException)
add_subdirectory(getenclave)
add_subdirectory(hostcalls)
add_subdirectory(hexdump)
add_subdirectory(libc)
add_subdirectory(libcxx)
add_subdirectory(libcxxrt)
add_subdirectory(ocall)
add_subdirectory(ocall-alloc)
add_subdirectory(ocall-create)
add_subdirectory(print)
add_subdirectory(props)
add_subdirectory(report)
add_subdirectory(SampleApp)
add_subdirectory(SampleAppCRT)
add_subdirectory(sealKey)
add_subdirectory(stdcxx)
add_subdirectory(thread)
add_subdirectory(threadcxx)
endif()

if (UNIX)
add_subdirectory(backtrace)
add_subdirectory(crypto)
add_subdirectory(libunwind)
add_subdirectory(mbed)
add_subdirectory(stdc)
add_subdirectory(VectorException)

# Following five tests are UNIX only because they depend on the oegen tool
# that is not supported on Windows.
add_subdirectory(file)
add_subdirectory(pingpong)
add_subdirectory(pingpong-shared)

# oeedger8r runs only on Linux
add_subdirectory(oeedger8r)
endif()
